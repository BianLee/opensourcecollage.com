{"ast":null,"code":"var _jsxFileName = \"/home/bian/Desktop/Summer/a/src/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport firebaseApp from \"../firebaseApp\";\nimport { Hero } from \"./hero\";\nimport firebase from \"firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport function LoginSetupContainer() {\n  _s();\n\n  var currentUser = \"\";\n  const [user, setUser] = useState(localStorage.getItem(\"user\"));\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [emailError, setEmailError] = useState(\"\");\n  const [passwordError, setPasswordError] = useState(\"\");\n  const [hasAccount, setHasAccount] = useState(false);\n\n  const clearInputs = () => {\n    setEmail(\"\");\n    setPassword(\"\");\n  };\n\n  const clearErrors = () => {\n    setEmailError(\"\");\n  };\n\n  const handleLogin = () => {\n    clearErrors(); // clearInputs();\n\n    firebaseApp.auth().signInWithEmailAndPassword(email, password).catch(err => {\n      switch (err.code) {\n        case \"auth/invalid-email\":\n        case \"auth/user-disabled\":\n        case \"auth/user-not-found\":\n          setEmailError(\"Email not found\");\n          break;\n\n        case \"auth/wrong-password\":\n          setPasswordError(\"Wrong password\");\n          break;\n      }\n    });\n  };\n\n  const handleSignup = () => {\n    clearErrors(); // clearInputs();\n\n    console.log(username);\n    firebaseApp.auth().createUserWithEmailAndPassword(email, password).then(function (data) {\n      console.log(\"uid\", data.user.uid);\n      firebase.database().ref(\"users/\" + data.user.uid).set({\n        id: data.user.uid,\n        username: username,\n        email: email\n      });\n    }).catch(err => {\n      console.log(\"error occured\");\n\n      switch (err.code) {\n        case \"auth/email-already-in-use\":\n        case \"auth/invalid-email\":\n          setEmailError(\"Invalid email\");\n          break;\n\n        case \"auth/weak-password\":\n          setPasswordError(\"Weak password\");\n          break;\n      }\n    });\n  };\n\n  const handleLogout = () => {\n    firebaseApp.auth().signOut();\n    localStorage.clear();\n    localStorage.setItem(\"user\", \"\");\n  };\n\n  const authListener = () => {\n    firebaseApp.auth().onAuthStateChanged(user => {\n      if (user) {\n        clearInputs();\n        setUser(user);\n        localStorage.setItem(\"user\", user);\n        console.log(username);\n        console.log(user.uid);\n      } else {\n        setUser(\"\");\n      }\n    });\n  };\n\n  useEffect(() => {\n    authListener();\n  }, []);\n\n  if (user) {\n    return /*#__PURE__*/_jsxDEV(Hero, {\n      username: currentUser,\n      handleLogout: handleLogout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 12\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(LoginElementContainer, {\n        email: email,\n        setEmail: setEmail,\n        password: password,\n        setPassword: setPassword,\n        username: username,\n        setUsername: setUsername,\n        handleLogin: handleLogin,\n        handleSignup: handleSignup,\n        hasAccount: hasAccount,\n        setHasAccount: setHasAccount,\n        emailError: emailError,\n        passwordError: passwordError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n}\n\n_s(LoginSetupContainer, \"rGAdMAQ7WDs/FES2pbPoeszyQus=\");\n\n_c = LoginSetupContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginSetupContainer\");","map":{"version":3,"sources":["/home/bian/Desktop/Summer/a/src/Login.js"],"names":["React","useEffect","useState","firebaseApp","Hero","firebase","LoginSetupContainer","currentUser","user","setUser","localStorage","getItem","email","setEmail","password","setPassword","username","setUsername","emailError","setEmailError","passwordError","setPasswordError","hasAccount","setHasAccount","clearInputs","clearErrors","handleLogin","auth","signInWithEmailAndPassword","catch","err","code","handleSignup","console","log","createUserWithEmailAndPassword","then","data","uid","database","ref","set","id","handleLogout","signOut","clear","setItem","authListener","onAuthStateChanged"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport firebaseApp from \"../firebaseApp\";\nimport { Hero } from \"./hero\";\nimport firebase from \"firebase\";\n\nexport function LoginSetupContainer() {\n  var currentUser = \"\";\n\n  const [user, setUser] = useState(localStorage.getItem(\"user\"));\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [emailError, setEmailError] = useState(\"\");\n  const [passwordError, setPasswordError] = useState(\"\");\n  const [hasAccount, setHasAccount] = useState(false);\n\n  const clearInputs = () => {\n    setEmail(\"\");\n    setPassword(\"\");\n  };\n\n  const clearErrors = () => {\n    setEmailError(\"\");\n  };\n\n  const handleLogin = () => {\n    clearErrors();\n    // clearInputs();\n    firebaseApp\n      .auth()\n      .signInWithEmailAndPassword(email, password)\n      .catch((err) => {\n        switch (err.code) {\n          case \"auth/invalid-email\":\n          case \"auth/user-disabled\":\n          case \"auth/user-not-found\":\n            setEmailError(\"Email not found\");\n            break;\n          case \"auth/wrong-password\":\n            setPasswordError(\"Wrong password\");\n            break;\n        }\n      });\n  };\n\n  const handleSignup = () => {\n    clearErrors();\n    // clearInputs();\n    console.log(username);\n    firebaseApp\n      .auth()\n      .createUserWithEmailAndPassword(email, password)\n      .then(function (data) {\n        console.log(\"uid\", data.user.uid);\n        firebase\n          .database()\n          .ref(\"users/\" + data.user.uid)\n          .set({\n            id: data.user.uid,\n            username: username,\n            email: email,\n          });\n      })\n      .catch((err) => {\n        console.log(\"error occured\");\n        switch (err.code) {\n          case \"auth/email-already-in-use\":\n          case \"auth/invalid-email\":\n            setEmailError(\"Invalid email\");\n            break;\n          case \"auth/weak-password\":\n            setPasswordError(\"Weak password\");\n            break;\n        }\n      });\n  };\n\n  const handleLogout = () => {\n    firebaseApp.auth().signOut();\n    localStorage.clear();\n    localStorage.setItem(\"user\", \"\");\n  };\n\n  const authListener = () => {\n    firebaseApp.auth().onAuthStateChanged((user) => {\n      if (user) {\n        clearInputs();\n        setUser(user);\n        localStorage.setItem(\"user\", user);\n        console.log(username);\n        console.log(user.uid);\n      } else {\n        setUser(\"\");\n      }\n    });\n  };\n\n  useEffect(() => {\n    authListener();\n  }, []);\n\n  if (user) {\n    return <Hero username={currentUser} handleLogout={handleLogout} />;\n  } else {\n    return (\n      <>\n        <LoginElementContainer\n          email={email}\n          setEmail={setEmail}\n          password={password}\n          setPassword={setPassword}\n          username={username}\n          setUsername={setUsername}\n          handleLogin={handleLogin}\n          handleSignup={handleSignup}\n          hasAccount={hasAccount}\n          setHasAccount={setHasAccount}\n          emailError={emailError}\n          passwordError={passwordError}\n        />\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}