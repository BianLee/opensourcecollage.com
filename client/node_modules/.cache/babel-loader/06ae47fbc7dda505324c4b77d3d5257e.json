{"ast":null,"code":"var _jsxFileName = \"/home/bian/Desktop/Summer/a/src/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport firebaseApp from \"./firebaseapp\";\nimport firebase from \"firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n\n  var currentUser = \"\";\n  const [user, setUser] = useState(localStorage.getItem(\"user\"));\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [emailError, setEmailError] = useState(\"\");\n  const [passwordError, setPasswordError] = useState(\"\");\n  const [hasAccount, setHasAccount] = useState(false);\n\n  const clearInputs = () => {\n    setEmail(\"\");\n    setPassword(\"\");\n  };\n\n  const clearErrors = () => {\n    setEmailError(\"\");\n  };\n\n  const handleLogin = () => {\n    clearErrors(); // clearInputs();\n\n    firebaseApp.auth().signInWithEmailAndPassword(email, password).catch(err => {\n      switch (err.code) {\n        case \"auth/invalid-email\":\n        case \"auth/user-disabled\":\n        case \"auth/user-not-found\":\n          setEmailError(\"Email not found\");\n          break;\n\n        case \"auth/wrong-password\":\n          setPasswordError(\"Wrong password\");\n          break;\n      }\n    });\n  };\n\n  const handleSignup = () => {\n    clearErrors(); // clearInputs();\n\n    console.log(username);\n    firebaseApp.auth().createUserWithEmailAndPassword(email, password).then(function (data) {\n      console.log(\"uid\", data.user.uid);\n      firebase.database().ref(\"users/\" + data.user.uid).set({\n        id: data.user.uid,\n        username: username,\n        email: email\n      });\n    }).catch(err => {\n      console.log(\"error occured\");\n\n      switch (err.code) {\n        case \"auth/email-already-in-use\":\n        case \"auth/invalid-email\":\n          setEmailError(\"Invalid email\");\n          break;\n\n        case \"auth/weak-password\":\n          setPasswordError(\"Weak password\");\n          break;\n      }\n    });\n  };\n\n  const handleLogout = () => {\n    firebaseApp.auth().signOut();\n    localStorage.clear();\n    localStorage.setItem(\"user\", \"\");\n  };\n\n  const authListener = () => {\n    firebaseApp.auth().onAuthStateChanged(user => {\n      if (user) {\n        clearInputs();\n        setUser(user);\n        localStorage.setItem(\"user\", user);\n        console.log(username);\n        console.log(user.uid);\n      } else {\n        setUser(\"\");\n      }\n    });\n  };\n\n  useEffect(() => {\n    authListener();\n  }, []);\n\n  if (user) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Logged In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Logged Out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n}\n\n_s(Login, \"rGAdMAQ7WDs/FES2pbPoeszyQus=\");\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/bian/Desktop/Summer/a/src/Login.js"],"names":["React","useEffect","useState","firebaseApp","firebase","Login","currentUser","user","setUser","localStorage","getItem","email","setEmail","password","setPassword","username","setUsername","emailError","setEmailError","passwordError","setPasswordError","hasAccount","setHasAccount","clearInputs","clearErrors","handleLogin","auth","signInWithEmailAndPassword","catch","err","code","handleSignup","console","log","createUserWithEmailAndPassword","then","data","uid","database","ref","set","id","handleLogout","signOut","clear","setItem","authListener","onAuthStateChanged"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport firebaseApp from \"./firebaseapp\";\nimport firebase from \"firebase\";\n\nexport default function Login() {\n  var currentUser = \"\";\n\n  const [user, setUser] = useState(localStorage.getItem(\"user\"));\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [emailError, setEmailError] = useState(\"\");\n  const [passwordError, setPasswordError] = useState(\"\");\n  const [hasAccount, setHasAccount] = useState(false);\n\n  const clearInputs = () => {\n    setEmail(\"\");\n    setPassword(\"\");\n  };\n\n  const clearErrors = () => {\n    setEmailError(\"\");\n  };\n\n  const handleLogin = () => {\n    clearErrors();\n    // clearInputs();\n    firebaseApp\n      .auth()\n      .signInWithEmailAndPassword(email, password)\n      .catch((err) => {\n        switch (err.code) {\n          case \"auth/invalid-email\":\n          case \"auth/user-disabled\":\n          case \"auth/user-not-found\":\n            setEmailError(\"Email not found\");\n            break;\n          case \"auth/wrong-password\":\n            setPasswordError(\"Wrong password\");\n            break;\n        }\n      });\n  };\n\n  const handleSignup = () => {\n    clearErrors();\n    // clearInputs();\n    console.log(username);\n    firebaseApp\n      .auth()\n      .createUserWithEmailAndPassword(email, password)\n      .then(function (data) {\n        console.log(\"uid\", data.user.uid);\n        firebase\n          .database()\n          .ref(\"users/\" + data.user.uid)\n          .set({\n            id: data.user.uid,\n            username: username,\n            email: email,\n          });\n      })\n      .catch((err) => {\n        console.log(\"error occured\");\n        switch (err.code) {\n          case \"auth/email-already-in-use\":\n          case \"auth/invalid-email\":\n            setEmailError(\"Invalid email\");\n            break;\n          case \"auth/weak-password\":\n            setPasswordError(\"Weak password\");\n            break;\n        }\n      });\n  };\n\n  const handleLogout = () => {\n    firebaseApp.auth().signOut();\n    localStorage.clear();\n    localStorage.setItem(\"user\", \"\");\n  };\n\n  const authListener = () => {\n    firebaseApp.auth().onAuthStateChanged((user) => {\n      if (user) {\n        clearInputs();\n        setUser(user);\n        localStorage.setItem(\"user\", user);\n        console.log(username);\n        console.log(user.uid);\n      } else {\n        setUser(\"\");\n      }\n    });\n  };\n\n  useEffect(() => {\n    authListener();\n  }, []);\n\n  if (user) {\n    return (\n      <>\n        <p>Logged In</p>\n      </>\n    );\n  } else {\n    return (\n      <>\n        <p>Logged Out</p>\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}