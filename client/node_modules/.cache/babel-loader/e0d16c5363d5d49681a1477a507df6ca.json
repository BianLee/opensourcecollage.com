{"ast":null,"code":"const visit = require('unist-util-visit');\n\nmodule.exports = rehypeFilter;\n/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('hast').Root} Root\n * @typedef {import('hast').Element} Element\n *\n * @callback AllowElement\n * @param {Element} element\n * @param {number} index\n * @param {Element|Root} parent\n * @returns {boolean|undefined}\n *\n * @typedef RehypeFilterOptions\n * @property {Array.<string>} [allowedElements]\n * @property {Array.<string>} [disallowedElements=[]]\n * @property {AllowElement} [allowElement]\n * @property {boolean} [unwrapDisallowed=false]\n */\n\n/**\n * @type {import('unified').Plugin<[RehypeFilterOptions]>}\n */\n\nfunction rehypeFilter(options) {\n  if (options.allowedElements && options.disallowedElements) {\n    throw new TypeError('Only one of `allowedElements` and `disallowedElements` should be defined');\n  }\n\n  if (options.allowedElements || options.disallowedElements || options.allowElement) {\n    return tree => {\n      const node =\n      /** @type {Root} */\n      tree;\n      visit(node, 'element', onelement);\n    };\n  }\n  /**\n   * @param {Node} node_\n   * @param {number|null|undefined} index\n   * @param {Node|null|undefined} parent_\n   * @returns {number|void}\n   */\n\n\n  function onelement(node_, index, parent_) {\n    const node =\n    /** @type {Element} */\n    node_;\n    const parent =\n    /** @type {Element|Root} */\n    parent_;\n    /** @type {boolean|undefined} */\n\n    let remove;\n\n    if (options.allowedElements) {\n      remove = !options.allowedElements.includes(node.tagName);\n    } else if (options.disallowedElements) {\n      remove = options.disallowedElements.includes(node.tagName);\n    }\n\n    if (!remove && options.allowElement && typeof index === 'number') {\n      remove = !options.allowElement(node, index, parent);\n    }\n\n    if (remove && typeof index === 'number') {\n      if (options.unwrapDisallowed && node.children) {\n        parent.children.splice(index, 1, ...node.children);\n      } else {\n        parent.children.splice(index, 1);\n      }\n\n      return index;\n    }\n\n    return undefined;\n  }\n}","map":{"version":3,"sources":["/home/bian/Desktop/Summer/a/client/node_modules/react-markdown/src/rehype-filter.js"],"names":["visit","require","module","exports","rehypeFilter","options","allowedElements","disallowedElements","TypeError","allowElement","tree","node","onelement","node_","index","parent_","parent","remove","includes","tagName","unwrapDisallowed","children","splice","undefined"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,kBAAD,CAArB;;AAEAC,MAAM,CAACC,OAAP,GAAiBC,YAAjB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AACA,SAASA,YAAT,CAAsBC,OAAtB,EAA+B;AAC7B,MAAIA,OAAO,CAACC,eAAR,IAA2BD,OAAO,CAACE,kBAAvC,EAA2D;AACzD,UAAM,IAAIC,SAAJ,CACJ,0EADI,CAAN;AAGD;;AAED,MACEH,OAAO,CAACC,eAAR,IACAD,OAAO,CAACE,kBADR,IAEAF,OAAO,CAACI,YAHV,EAIE;AACA,WAAQC,IAAD,IAAU;AACf,YAAMC,IAAI;AAAG;AAAqBD,MAAAA,IAAlC;AACAV,MAAAA,KAAK,CAACW,IAAD,EAAO,SAAP,EAAkBC,SAAlB,CAAL;AACD,KAHD;AAID;AAED;AACF;AACA;AACA;AACA;AACA;;;AACE,WAASA,SAAT,CAAmBC,KAAnB,EAA0BC,KAA1B,EAAiCC,OAAjC,EAA0C;AACxC,UAAMJ,IAAI;AAAG;AAAwBE,IAAAA,KAArC;AACA,UAAMG,MAAM;AAAG;AAA6BD,IAAAA,OAA5C;AACA;;AACA,QAAIE,MAAJ;;AAEA,QAAIZ,OAAO,CAACC,eAAZ,EAA6B;AAC3BW,MAAAA,MAAM,GAAG,CAACZ,OAAO,CAACC,eAAR,CAAwBY,QAAxB,CAAiCP,IAAI,CAACQ,OAAtC,CAAV;AACD,KAFD,MAEO,IAAId,OAAO,CAACE,kBAAZ,EAAgC;AACrCU,MAAAA,MAAM,GAAGZ,OAAO,CAACE,kBAAR,CAA2BW,QAA3B,CAAoCP,IAAI,CAACQ,OAAzC,CAAT;AACD;;AAED,QAAI,CAACF,MAAD,IAAWZ,OAAO,CAACI,YAAnB,IAAmC,OAAOK,KAAP,KAAiB,QAAxD,EAAkE;AAChEG,MAAAA,MAAM,GAAG,CAACZ,OAAO,CAACI,YAAR,CAAqBE,IAArB,EAA2BG,KAA3B,EAAkCE,MAAlC,CAAV;AACD;;AAED,QAAIC,MAAM,IAAI,OAAOH,KAAP,KAAiB,QAA/B,EAAyC;AACvC,UAAIT,OAAO,CAACe,gBAAR,IAA4BT,IAAI,CAACU,QAArC,EAA+C;AAC7CL,QAAAA,MAAM,CAACK,QAAP,CAAgBC,MAAhB,CAAuBR,KAAvB,EAA8B,CAA9B,EAAiC,GAAGH,IAAI,CAACU,QAAzC;AACD,OAFD,MAEO;AACLL,QAAAA,MAAM,CAACK,QAAP,CAAgBC,MAAhB,CAAuBR,KAAvB,EAA8B,CAA9B;AACD;;AAED,aAAOA,KAAP;AACD;;AAED,WAAOS,SAAP;AACD;AACF","sourcesContent":["const visit = require('unist-util-visit')\n\nmodule.exports = rehypeFilter\n\n/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('hast').Root} Root\n * @typedef {import('hast').Element} Element\n *\n * @callback AllowElement\n * @param {Element} element\n * @param {number} index\n * @param {Element|Root} parent\n * @returns {boolean|undefined}\n *\n * @typedef RehypeFilterOptions\n * @property {Array.<string>} [allowedElements]\n * @property {Array.<string>} [disallowedElements=[]]\n * @property {AllowElement} [allowElement]\n * @property {boolean} [unwrapDisallowed=false]\n */\n\n/**\n * @type {import('unified').Plugin<[RehypeFilterOptions]>}\n */\nfunction rehypeFilter(options) {\n  if (options.allowedElements && options.disallowedElements) {\n    throw new TypeError(\n      'Only one of `allowedElements` and `disallowedElements` should be defined'\n    )\n  }\n\n  if (\n    options.allowedElements ||\n    options.disallowedElements ||\n    options.allowElement\n  ) {\n    return (tree) => {\n      const node = /** @type {Root} */ (tree)\n      visit(node, 'element', onelement)\n    }\n  }\n\n  /**\n   * @param {Node} node_\n   * @param {number|null|undefined} index\n   * @param {Node|null|undefined} parent_\n   * @returns {number|void}\n   */\n  function onelement(node_, index, parent_) {\n    const node = /** @type {Element} */ (node_)\n    const parent = /** @type {Element|Root} */ (parent_)\n    /** @type {boolean|undefined} */\n    let remove\n\n    if (options.allowedElements) {\n      remove = !options.allowedElements.includes(node.tagName)\n    } else if (options.disallowedElements) {\n      remove = options.disallowedElements.includes(node.tagName)\n    }\n\n    if (!remove && options.allowElement && typeof index === 'number') {\n      remove = !options.allowElement(node, index, parent)\n    }\n\n    if (remove && typeof index === 'number') {\n      if (options.unwrapDisallowed && node.children) {\n        parent.children.splice(index, 1, ...node.children)\n      } else {\n        parent.children.splice(index, 1)\n      }\n\n      return index\n    }\n\n    return undefined\n  }\n}\n"]},"metadata":{},"sourceType":"script"}